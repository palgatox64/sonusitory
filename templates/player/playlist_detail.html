{% extends request.htmx|yesno:"_base_empty.html,base.html" %}
{% load static %}

{% block content %}
    <div style="display: flex; align-items: flex-end; gap: 20px; margin-bottom: 2rem;">
        <div style="width: 150px; height: 150px; position: relative;">
            <img 
                src="{% if playlist.cover_image_url %}{{ playlist.cover_image_url }}{% else %}{% static 'images/default_cover.png' %}{% endif %}" 
                alt="{{ playlist.name }}" 
                style="width: 150px; height: 150px; border-radius: 5px; object-fit: cover;">
        </div>
        <div>
            <h1>{{ playlist.name }}</h1>
            <h2>{{ playlist.songs.count }} canciones</h2>
        </div>
    </div>
    
    <div class="action-bar">
        <p>
            <a href="{% url 'playlist_list' %}" 
               hx-get="{% url 'playlist_list' %}" 
               hx-target=".main-content" 
               hx-push-url="true" 
               class="btn">
                Volver a Playlists
            </a>
            <button 
                id="edit-playlist-btn" 
                class="btn"
                data-playlist-id="{{ playlist.id }}"
                data-playlist-name="{{ playlist.name }}"
                data-playlist-cover="{{ playlist.cover_image_url|default:'' }}">
                Editar Playlist
            </button>
        </p>
    </div>
    
    {% if playlist.songs.all %}
        <ul id="song-list">
            {% for song in playlist.songs.all %}
                <li data-song-id="{{ song.google_file_id }}" data-song-name="{{ song.title }}">
                    {{ song.title }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>Esta playlist está vacía. ¡Añade algunas canciones!</p>
    {% endif %}
{% endblock %}