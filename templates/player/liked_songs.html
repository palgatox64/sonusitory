{% extends request.htmx|yesno:"_base_empty.html,base.html" %}
{% load static %}

{% block content %}
    <div style="display: flex; align-items: flex-end; gap: 20px; margin-bottom: 2rem;">
        <div style="width: 150px; height: 150px; position: relative;">
            <img 
                src="{% static 'images/liked.png' %}" 
                alt="Tus Me Gusta" 
                style="width: 150px; height: 150px; border-radius: 5px; object-fit: cover;">
        </div>
        <div>
            <h1>Tus me gusta</h1>
            <h2>{{ songs|length }} pista{{ songs|length|pluralize:"s" }}</h2>
        </div>
    </div>

    <div class="action-bar">
        <p>
            <a href="{% url 'folder_browser' %}" hx-get="{% url 'folder_browser' %}" hx-target=".main-content" hx-push-url="true" class="btn">Volver a la Biblioteca</a>
        </p>
    </div>

    {% if songs %}
        <ul id="song-list">
            {% for song in songs %}
                <li data-song-id="{{ song.google_file_id }}" data-song-name="{{ song.title }}">
                    {{ song.title }}
                    {% if song.artist %}
                        <span style="color: #b3b3b3; margin-left: 10px;">por {{ song.artist.name }}</span>
                    {% endif %}
                
                    <div class="song-menu-container">
                        <button class="like-btn liked" 
                                data-song-id="{{ song.google_file_id }}"
                                title="Me gusta">
                            <i class="fas fa-heart"></i>
                        </button>
                        <button class="song-menu-btn" title="Más opciones">
                            <i class="fas fa-ellipsis-v"></i>
                        </button>
                        <div class="song-menu-dropdown">
                            <button class="queue-add-btn" 
                                    title="Añadir a la cola"
                                    data-song-id="{{ song.google_file_id }}"
                                    data-song-name="{{ song.title }}">
                                <img src="{% static 'images/queue_icon.png' %}" alt="Añadir a la cola" style="width: 16px; height: 16px;">
                                <span>Añadir a la cola</span>
                            </button>
                        </div>
                    </div>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No tienes pistas marcadas como "Me gusta" aún.</p>
    {% endif %}
{% endblock %}